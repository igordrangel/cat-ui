<fieldset *ngIf="listItemConfig && formListItem" [formGroup]="formListItem" class="col-12">
  <legend>
    <button
      [disabled]="getItemList().controls.length === listItemConfig.options?.maxItems"
      (click)="addItem()"
      type="button"
      class="cat-btn-add-item-list">
      <i class="fa-solid fa-circle-plus"></i>
    </button>

    {{listItemConfig.legend}}

    <span *ngIf="listItemConfig.options" class="cat-list-item-size">
      (Min: {{listItemConfig.options.minItems ?? 0}} | Max: {{listItemConfig.options.maxItems ?? '&#8734;'}})
    </span>
  </legend>

  <ng-container *ngFor="let item of getItemList().controls;let itemIndex = index">
    <fieldset class="col-12">
      <legend>
        <button *ngIf="getItemList().controls.length > listItemConfig.options?.minItems" (click)="removeItem(itemIndex)" type="button" class="cat-btn-add-item-list">
          <i class="fa-solid fa-circle-minus"></i>
        </button>
        Item #{{itemIndex + 1}}
      </legend>

      <ng-container *ngFor="let fieldConfig of listItemConfig.config?.fields">
        <div
          #containerField
          [ngClass]="'col-' + fieldConfig.grid">
          <cat-form-field
            [fieldConfig]="fieldConfig"
            [variableTree]="getFullListItemName()"
            [highlightInvalidFields]="highlightInvalidFields"
            (isHiddenField)="hideField(containerField, $event)"
            (emitFormControl)="addFormControl(itemIndex, fieldConfig.name, $event)">
          </cat-form-field>
        </div>
      </ng-container>
    </fieldset>
  </ng-container>

</fieldset>
