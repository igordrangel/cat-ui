<fieldset *ngIf="fieldsetConfig && formFieldset" [formGroup]="formFieldset">
  <legend>{{fieldsetConfig.legend}}</legend>

  <ng-container *ngFor="let fieldset of fieldsetConfig.config?.fieldset">
    <cat-form-fieldset
      [fieldsetConfig]="fieldset"
      [highlightInvalidFields]="highlightInvalidFields"
      [variableTree]="getFullFieldsetName()"
      (emitFormGroup)="addFormGroup(fieldsetConfig.name, $event)">
    </cat-form-fieldset>
  </ng-container>

  <ng-container *ngFor="let fieldConfig of fieldsetConfig.config?.fields">
    <div
      #containerField
      [ngClass]="'col-' + fieldConfig.grid">
      <cat-form-field
        [fieldConfig]="fieldConfig"
        [variableTree]="getFullFieldsetName()"
        [highlightInvalidFields]="highlightInvalidFields"
        (isHiddenField)="hideField(containerField, $event)"
        (emitFormControl)="addFormControl(fieldConfig.name, $event)">
      </cat-form-field>
    </div>
  </ng-container>

</fieldset>
