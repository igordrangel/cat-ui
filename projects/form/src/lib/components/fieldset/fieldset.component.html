<fieldset *ngIf="fieldsetConfig && formFieldset" [formGroup]="formFieldset">
  <legend>{{fieldsetConfig.legend}}</legend>

  <ng-container *ngFor="let fieldset of fieldsetConfig.config?.fieldset">
    <cat-form-fieldset
      [fieldsetConfig]="fieldset"
      [variableTree]="getFullFieldsetName()"
      (emitFormGroup)="addFormGroup(fieldsetConfig.name, $event)">
    </cat-form-fieldset>
  </ng-container>

  <ng-container *ngFor="let fieldConfig of fieldsetConfig.config?.fields">
    <cat-form-field
      [ngClass]="'col-' + fieldConfig?.grid"
      [fieldConfig]="fieldConfig"
      [variableTree]="getFullFieldsetName()"
      (emitFormControl)="addFormControl(fieldConfig.name, $event)">
    </cat-form-field>
  </ng-container>

</fieldset>
